{% include 'global/partials_template/head/head_top.html' %}
{% load static %}
{% block css %}{% endblock css %} 
<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
              <!-- Bootstrap JavaScript -->
<script src="{% static 'global/js/jquery-3.6.1.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'global/css/bootstrap.min.css' %}">   
<link rel="stylesheet" href=" {% static 'global/css/footer.css' %}">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bubbler+One&family=Darker+Grotesque:wght@500&family=Forum&family=Montserrat+Alternates&family=Tenor+Sans&display=swap" rel="stylesheet">

<link rel="stylesheet" href=" {% static 'global/css/message.css' %}">
<title>::UPA - {% block title_login %} {% endblock title_login %}</title> 
<!--font waseome pro-->
<link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/all.css">
<!--font waseome pro-->
<style>
    body{
        font-family: 'Bubbler One', sans-serif !important;
        font-family: 'Darker Grotesque', sans-serif !important;
        font-family: 'Forum', cursive !important;
        font-family: 'Montserrat Alternates', sans-serif !important;
        font-family: 'Tenor Sans', sans-serif !important;    
        background-color: #e3e3e3 !important;    
    }
    a{text-decoration: none; transition: 300ms all ease-in-out;}
    a:hover{padding-right: 0.3rem;padding-left: 0.3rem;box-shadow: rgba(0, 0, 0, 0.05) 0px 6px 24px 0px, rgba(0, 0, 0, 0.08) 0px 0px 0px 1px;}    
    .alert-success, .alert-danger {
        border:rgb(159,211,204)!important; 
        width: 75% !important;
        margin: 2rem auto  !important;
        font-size:1.3rem ;
        box-shadow: rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px, rgba(17, 17, 26, 0.1) 0px 24px 80px !important;
    }
    .alert-success{
        background-color: rgb(159,211,204)!important;         
    }
    .alert-danger{
        background-color: rgb(246,41,61)!important;
        color: white!important;
        font-size:1rem !important ;
    }
    .fs-7{font-size:0.75rem !important}
    .mt--1{margin-top: -1rem !important}
    .mt--2{margin-top: -2rem !important}
    .alert-warning{
        background-color: #dc1840 !important;
        color: #fff !important;
        font-size: 2rem;
    }
  
    main{
            background-color: #e4e4e4 !important;
        }
    .bg-brown{background: #b28767!important;color: black!important;}
    .bg-brown-subtle{background: #c4a17e !important;color: #000!important;}

    /*Notificações*/  

    /* START CSS OF NOTIFICATION BELL */
    :root {
      --bell-icon-color: red;
      --bell-count-color: blue;
    }
    .notification-bell {
        position: relative;
    }
    svg.bell-con {
        fill: url(#fillGradient);
        z-index: 9;
        position: relative;
        border-radius: 20px;
        width: 40px;
        height: 40px;
        display: flex;
        justify-content: center;
        background-color: #41e09e;
        padding: 5px;
        
    }
    .alarm-notify svg.bell-con {
        animation-name: shake;
        animation: shake 6s 0.5s ease-in-out infinite;
    }
    .notification-count {
        display: flex;
        background: linear-gradient(to right, #fff 0%, #f6f6f6 100%);
        color: #222;
        width: 20px;
        justify-content: center;
        align-items: center;
        height: 20px;
        border-radius: 50px;
        position: absolute;
        top: 0;
        right: 2px;
        z-index: 9;
        border: 2px solid #232323;
    }
    .alarm-notify.notification-bell:before {
        content: '';
        background: #f7f2f2;
        opacity: 0.4;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50px;
        transform: scale(1);
        animation-name: transformScale;
        animation-duration: 1.5s;
        animation-delay: 0;
        animation-iteration-count: infinite;
    }
    .alarm-notify.notification-bell:after {
        content: '';
        background: #000;
        opacity: 0.4;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50px;
        transform: scale(1);
        animation-name: transformScale;
        animation-duration: 1.5s;
        animation-delay: 0.75s;
        animation-iteration-count: infinite;
    }

    @keyframes transformScale {
      0%   {
        transform: scale(1);
        opacity: 0.4; 
      }
      100% {
        transform: scale(2.5);
        opacity: 0.01; 
      }
    }
    @keyframes shake {
      0% { transform: rotate(0); }
      1% { transform: rotate(30deg); }
      3% { transform: rotate(-28deg); }
      5% { transform: rotate(34deg); }
      7% { transform: rotate(-32deg); }
      9% { transform: rotate(30deg); }
      11% { transform: rotate(-28deg); }
      13% { transform: rotate(26deg); }
      15% { transform: rotate(-24deg); }
      17% { transform: rotate(22deg); }
      19% { transform: rotate(-20deg); }
      21% { transform: rotate(18deg); }
      23% { transform: rotate(-16deg); }
      25% { transform: rotate(14deg); }
      27% { transform: rotate(-12deg); }
      29% { transform: rotate(10deg); }
      31% { transform: rotate(-8deg); }
      33% { transform: rotate(6deg); }
      35% { transform: rotate(-4deg); }
      37% { transform: rotate(2deg); }
      39% { transform: rotate(-1deg); }
      41% { transform: rotate(1deg); }
      43% { transform: rotate(0); }
      100% { transform: rotate(0); }
    }
    @keyframes gradient {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }    
</style>    
{% include 'global/partials_template/head/head_botton.html' %} 
<div class="vetor-img-aereo">{% block vetor-img-aereo %}{% endblock vetor-img-aereo %}</div>
<div class='conteiner'>    
    <!--Menu lateral  -->
    {% include 'global/partials_template/menu-lateral/menu-lateral-atend.html' %}
    <!--Fim Menu lateral-->
    <div class="conteiner-body">    
      <nav class="navbar navbar-expand-lg navbar-dark " aria-label="Tenth navbar example">
        <div class="container-fluid" style="background-color: var(--cor-cidade-primario);">          
          <span class="fs-5 text-light p-1">UPA - UNIDADE DE PRONTO ATENDIMENTO</span>    
          <div class="collapse navbar-collapse justify-content-end" id="navbarsExample08" style="background-color: var(--cor-cidade-primario);">
            <ul class="navbar-nav example"> 
              <!--Noticações ativas-->
              <li class="nav-item pt-2 col mx-5 text-light">
                <div class='fs-5'>
                  <i class="fa-thin fa-arrow-up-wide-short"></i>                  
                  {% if nome_mes_atual == 'April' %}Abril{% endif %}
                  {% if nome_mes_atual == 'May' %}Maio{% endif %}
                  {% if nome_mes_atual == 'June' %}Junho{% endif %}
                  {% if nome_mes_atual == 'July' %}Julho{% endif %}
                  <span class='fs-5 bolder'>
                  - {{quantidade_registros_por_mes}} atendimentos / {{todos_atend}} [total de atendimentos]
                  </span>
                </div> 
              </li>              
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle d-flex" href="#" data-bs-toggle="dropdown" aria-expanded="false">
                  {% if not visto %}
                  <div class="notification-bell alarm-notify">                    
                    <svg class="bell-con w-100" viewBox="0 0 448 512" width="30" title="bell">
                      <path d="M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z" />
                        <defs>
                          <linearGradient id="fillGradient">
                              <stop offset="0%" stop-color="#FE6603" ></stop>
                              <stop offset="50%" stop-color="#DC4F04" ></stop>
                              <stop offset="100%" stop-color="#9D3205" ></stop>
                          </linearGradient>
                        </defs>
                    </svg>
                    <span class="notification-count">3</span>
                  </div> 
                  {% else %} 
                  <svg fill="#000000" height="30px" width="30px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 459.334 459.334" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <path d="M175.216,404.514c-0.001,0.12-0.009,0.239-0.009,0.359c0,30.078,24.383,54.461,54.461,54.461 s54.461-24.383,54.461-54.461c0-0.12-0.008-0.239-0.009-0.359H175.216z"></path> <path d="M403.549,336.438l-49.015-72.002c0-22.041,0-75.898,0-89.83c0-60.581-43.144-111.079-100.381-122.459V24.485 C254.152,10.963,243.19,0,229.667,0s-24.485,10.963-24.485,24.485v27.663c-57.237,11.381-100.381,61.879-100.381,122.459 c0,23.716,0,76.084,0,89.83l-49.015,72.002c-5.163,7.584-5.709,17.401-1.419,25.511c4.29,8.11,12.712,13.182,21.887,13.182 H383.08c9.175,0,17.597-5.073,21.887-13.182C409.258,353.839,408.711,344.022,403.549,336.438z"></path> </g> </g> </g> </g></svg>
                  {% endif %}
                </a>
                <ul class="dropdown-menu" style='margin-left:-5rem'>
                  <h2 class="p-2 border-bottom border-1 bg-secondary-subtle" style='margin-top:-0.5rem'><i class="fa-solid fa-message-smile"></i> Área de Notificações Sobre o Sistema</h2>
                  {% for n in notification  %}
                  {% if user.is_authenticated %}
                      {% if user.groups.all %}
                          {% for group in user.groups.all %}
                            {% if n.user == user %}
                            {% if not n.visto %}
                              <li class="pe-5"><a class="dropdown-item link-primary" href="{% url 'configUPA:notifica_vist' n.id %}"><i class="fa-duotone fa-envelope"></i> {{n.name|safe}}dddd</a></li>  
                            {% else %}
                              <li class="pe-5"><a class="dropdown-item link-secondary" href="{% url 'configUPA:notifica_vist' n.id %}"><i class="fa-duotone fa-envelope-open-text"></i> {{n.name|safe}}</a></li>  
                            {% endif %}
                            {% endif %} 
                          {% endfor %}
                      {% endif %}
                  {% endif %}

                  
                  {% endfor %}   
                </ul>  
              </li>              
              <!--Notificação desativadas-->
              {% if user.is_superuser %}
              <li class="nav-item mx-2 mt-2 border-left border-right border-1 ">
                <a href="{% url 'configUPA:notifica_create' %}"><img src="{% static "svg/edit_bell.svg" %}" alt="" width='31' srcset=""></a>             
              </li>
              {% endif %}     
              <li class="nav-item">
                <i id="wifi_1" class="fa-duotone fa-wifi mt-3 fs-5"></i>             
              </li>              
              <li class="nav-item dropdown me-5">
                <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fa-solid fa-user" style="border-radius: 100%; border:solid #fff 0.1rem; padding: 0.5rem; margin-right: 0.25rem;margin-left: 1rem;"></i>&nbsp;
                  <strong  class="uppercase" style="padding-top:0.25rem">{{request.user}}</strong>
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item link-secondary d-flex" href="{% url 'Access_Login:logout_upa' %}"> &nbsp;<i id="sair_login" class="fa-duotone fa-arrow-left-to-arc mt-2"></i><i class="fa-solid fa-door-open"  style="padding: 0.5rem; "></i> <span style="padding-top:0.08rem"> Sair </a></span></li>
                </ul>                
              </li>             
              </li>
            </ul>
          </div>
        </div>
      </nav>      
    </div> 
</div>
<!--Menu Horizontal-->
<div class="menu-horizontal" style="background-color: #05888d; width: 100%;height: 2rem; margin-top: -0.1%;" >
    {% include 'global/partials_template/menu-lateral/menu-horizontal-global.html' %}    
</div>
<!--End Menu Horizontal-->
{% include 'global/message.html' %} 
<main style="margin-bottom: -6.4rem !important;">  
    <!--{% include 'global/partials_template/header/header.html' %}-->
    <!--<div class="main-header-title mb-5 p-2">{% block body_title %}  {% endblock body_title %}</div>-->
    <p>&nbsp;</p>
    {% block body_login %}{% endblock body_login %}
</main>

{% include 'global/partials_template/footer/footer.html' %}

<script>
    // Função para verificar a conexão com a internet
    function verificarConexao() {
      if (navigator.onLine) {
        // Se houver conexão, exiba a div
        document.getElementById("hospital_2").style.display = "block";        
        document.getElementById("hospital_1").style.display = "none";        
        document.getElementById("sair_login").style.display = "block";
        document.getElementById("wifi_1").style.display = "block";  
      } else {
        // Se não houver conexão, oculte a div
        document.getElementById("hospital_2").style.display = "none";
        document.getElementById("hospital_1").style.display = "block";
        document.getElementById("sair_login").style.display = "none";
        document.getElementById("wifi_1").style.display = "none";  
        document.getElementById("fa-hospital-user").style.display = "none";
        document.getElementById("fa-address-card").style.display = "block";
      }
    }

    // Registre um ouvinte de evento para verificar a conexão quando a página carregar e sempre que a conexão mudar
    window.addEventListener("load", verificarConexao);
    window.addEventListener("online", verificarConexao);
    window.addEventListener("offline", verificarConexao);
  </script>
  <div class='p-1 text-center bg-secondary-subtle' >
    {% if licenca_ativa == None %}
    <div style='background:#FA8072'>Lincença vencida. Por favor entrar em contato com o Administrador.</div>     
        <div class="modal fade" id="myModal" data-backdrop="static">
            <div class="modal-dialog">
              <div class="modal-content" style='width:30vw !important; height:27vw !important;'>
                <div class="modal-header" style='background:#FA8072'>
                    <h4 class="modal-title text-center">A LICENÇA EXPIROU <i class="fa-solid fa-house-medical-circle-exclamation" style="color: #dc1840;"></i></h4>
                </div>
              </div>
            </div>
          </div>
          
          <script>
            $(document).ready(function() {
              $('#myModal').modal('show');
            });
          </script>  
          <script>
    document.addEventListener("fullscreenchange", function () {
      if (document.fullscreenElement) {
        // A tela está em modo tela cheia
      } else {
        // A tela está fora do modo tela cheia
      }
    });
  
    // Coloca a tela em modo tela cheia
    function toggleFullscreen() {
      if (document.fullscreenElement) {
        // Sai do modo tela cheia
        document.exitFullscreen();
      } else {
        // Entra no modo tela cheia
        document.documentElement.requestFullscreen();
      }
    }
  </script>
    {% else %}
        {{licenca_ativa}}
    {% endif %}    
</div>
<script src='{% static "global/bootstrap-5.3.2-dist/js/bootstrap.bundle.min.js" %}'></script>

</body>
</html>